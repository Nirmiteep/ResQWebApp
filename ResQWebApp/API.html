<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body id="apibody1">
    <div id="weather" style="background: rgba(255, 255, 255, 0.8); padding: 20px; border-radius: 10px; max-width: 400px; margin: auto; margin-top: 50px;align-items: center;">

        <div id="header">

            <input type="text" name="" id="inp1" placeholder="Enter city name">
           <button onclick="getWeather()">üîç</button>
        </div>

        <div id="data">
           <div id="tempmain"  class="d">
             <h1 id="ic1">‚õÖ</h1>
            <h2 id="temp"></h2>  
           </div>

           <div id="speed" class="d">
             <h1 id="ic2"><i class="bi bi-wind"></i></h1>
            <h2 id="wind"></h2>
           </div>
        </div>
    </div>
     <!-- <div id="overlay"></div>
    <div id="messageBox">
        <p id="messageText"></p>
        <button onclick="closeMessageBox()">OK</button>
    </div> -->

    <script>
         function showMessageBox(message) {
            document.getElementById('messageText').innerText = message;
            document.getElementById('overlay').style.display = 'block';
            document.getElementById('messageBox').style.display = 'flex';
        }

        
        // function closeMessageBox() {
        //     document.getElementById('overlay').style.display = 'none';
        //     document.getElementById('messageBox').style.display = 'none';
        // }
        function getWeather(){

            let city=document.getElementById("inp1").value;
            document.getElementById("temp").innerText = "Loading...";
            document.getElementById("wind").innerText = "";
            document.getElementById("ic1").innerText = "‚è≥";
            fetch(`https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=5760fd2b56df38275f29a81302c3deb8`)
        

              .then((res) => {
                    if (!res.ok) { // Check for HTTP errors
                        throw new Error(`HTTP error! status: ${res.status}`);
                    }
                    return res.json();
                })
                .then((result) => {
                    console.log(result);
                    if (result.cod == 200) {
                        document.getElementById("temp").innerText = `${(result.main.temp - 273).toFixed(2)} ¬∞C`;
                        document.getElementById("wind").innerText = result.wind.speed + " km/hr";

                        // Update weather icon based on weather condition
                        const weatherCondition = result.weather[0].main.toLowerCase();
                        let icon = '‚ùì'; // Default unknown icon
                        if (weatherCondition.includes('clear')) {
                            icon = '‚òÄ'; // Sun
                        } else if (weatherCondition.includes('cloud')) {
                            icon = '‚òÅ'; // Cloud
                        } else if (weatherCondition.includes('rain') || weatherCondition.includes('drizzle')) {
                            icon = 'üåß'; // Rain cloud
                        } else if (weatherCondition.includes('thunderstorm')) {
                            icon = '‚õà'; // Thunderstorm
                        } else if (weatherCondition.includes('snow')) {
                            icon = '‚ùÑ'; // Snowflake
                        } else if (weatherCondition.includes('mist') || weatherCondition.includes('fog') || weatherCondition.includes('haze')) {
                            icon = 'üå´'; // Fog
                        }
                        document.getElementById("ic1").innerText = icon;

                    } else {
                        document.getElementById("temp").innerText = result.message;
                        document.getElementById("wind").innerText = '';
                        
                    }
                })
              .catch((error) => {
                    console.error("Fetch error:", error);
                    document.getElementById("temp").innerText = "Error";
                    document.getElementById("wind").innerText = "";
                    document.getElementById("ic1").innerText = '‚ùå'; 
                   
                    showMessageBox("Failed to fetch weather data. Please check the city name or your internet connection.");
                });
        }
    </script>
</body>
</html>